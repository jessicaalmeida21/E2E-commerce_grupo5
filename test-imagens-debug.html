<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Imagens</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .product { 
            border: 1px solid #ddd; 
            margin: 10px; 
            padding: 10px; 
            display: inline-block; 
            width: 200px; 
            vertical-align: top;
        }
        .product img { width: 100%; height: 150px; object-fit: cover; }
        .product h3 { font-size: 12px; margin: 5px 0; }
        .product p { font-size: 10px; color: #666; }
        .debug { background: #f0f0f0; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Debug de Imagens</h1>
    <div class="debug" id="debug"></div>
    <div id="products"></div>

    <script src="./js/api-service.js?v=18"></script>
    <script>
        function log(message) {
            const debug = document.getElementById('debug');
            debug.innerHTML += message + '<br>';
        }

        async function testImages() {
            try {
                log('Testando API...');
                const response = await fetch('https://catalogo-products.pages.dev/api/products?page=1&pageSize=10');
                const data = await response.json();
                
                log(`Produtos carregados: ${data.products.length}`);
                
                const container = document.getElementById('products');
                container.innerHTML = '';
                
                data.products.forEach((product, index) => {
                    const imageUrl = apiService.getProductImage(product);
                    
                    const div = document.createElement('div');
                    div.className = 'product';
                    div.innerHTML = `
                        <img src="${imageUrl}" alt="${product.title}" 
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkVycm8gSW1hZ2VtPC90ZXh0Pjwvc3ZnPg=='">
                        <h3>${product.title}</h3>
                        <p><strong>Marca:</strong> ${product.brand}</p>
                        <p><strong>Categoria:</strong> ${product.category}</p>
                        <p><strong>Imagem:</strong> ${imageUrl}</p>
                    `;
                    container.appendChild(div);
                    
                    log(`Produto ${index + 1}: ${product.title} - Imagem: ${imageUrl}`);
                });
                
            } catch (error) {
                log('Erro: ' + error.message);
            }
        }

        // Iniciar teste
        testImages();
    </script>
</body>
</html>
